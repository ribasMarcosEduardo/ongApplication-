<!DOCTYPE html>
<!-- Adicionando o namespace do Thymeleaf -->

<!-- ARQUIVO BASE GERADO PELO GEMINI PARA FAZER OS TESTES DE CADASTRO
TODO: ajustar validações dos campos no front-->

<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cadastro de Usuário</title>
    <!-- Um pouco de estilo para o formulário ficar mais apresentável -->
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-container { max-width: 600px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; }
        .form-group input, .form-group select { width: 100%; padding: 8px; box-sizing: border-box; }
        .error { color: red; font-size: 0.9em; }
        .success { color: green; background-color: #e6ffed; padding: 10px; border: 1px solid green; border-radius: 4px; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>

<div class="form-container">
    <h2>Cadastro de Novo Usuário</h2>

    <!-- Exibe a mensagem de sucesso, se existir -->
    <div th:if="${sucesso}" class="success" th:text="${sucesso}"></div>

    <!--
      th:action -> Para qual URL o formulário será enviado (@{/usuario/salvar})
      method="post" -> O method HTTP a ser usado
      th:object -> O objeto do 'Model' que estamos preenchendo (${usuarioDTO})
    -->
    <form th:action="@{/usuario/salvar}" method="post" th:object="${UsuarioDTO}">

        <div class="form-group">
            <label for="nome">Nome Completo:</label>
            <!-- th:field amarra este input ao atributo 'nome' do objeto usuarioDTO -->
            <input type="text" id="nome" th:field="*{nome}" />
            <!-- Exibe a mensagem de erro para este campo, se houver -->
            <p th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}" class="error"></p>
        </div>

        <div class="form-group">
            <label for="cpf">CPF (apenas números):</label>
            <input type="text" id="cpf" th:field="*{cpf}" />
            <p th:if="${#fields.hasErrors('cpf')}" th:errors="*{cpf}" class="error"></p>
        </div>

        <div class="form-group">
            <label for="dataNascimento">Data de Nascimento:</label>
            <input type="date" id="dataNascimento" th:field="*{dataNascimento}" />
            <p th:if="${#fields.hasErrors('dataNascimento')}" th:errors="*{dataNascimento}" class="error"></p>
        </div>

        <div class="form-group">
            <label for="senha">Senha:</label>
            <input type="password" id="senha" th:field="*{senha}" />
            <p th:if="${#fields.hasErrors('senha')}" th:errors="*{senha}" class="error"></p>
        </div>

        <div class="form-group">
            <label for="genero">Gênero:</label>
            <select id="genero" th:field="*{genero}">
                <option value="">Selecione...</option>
                <!-- O Thymeleaf consegue iterar sobre os valores do seu ENUM -->
                <option th:each="gen : ${T(bdTrabalho.OngAplication.Model.EMUN.Genero).values()}"
                        th:value="${gen}"
                        th:text="${gen}"></option>
            </select>
        </div>

        <div class="form-group">
            <label for="tipo">Tipo (A=Adotante, V=Voluntário, F=Funcionário):</label>
            <input type="text" id="tipo" th:field="*{tipo}" maxlength="1" />
            <p th:if="${#fields.hasErrors('tipo')}" th:errors="*{tipo}" class="error"></p>
        </div>

        <div class="form-group">
            <label for="foto">URL da Foto:</label>
            <input type="text" id="foto" th:field="*{foto}" />
        </div>

        <button type="submit">Cadastrar Usuário</button>
    </form>
</div>

</body>
</html>
